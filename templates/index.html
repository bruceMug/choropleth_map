<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>D3.js GeoJSON Visualization</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <!-- <script src="https://d3js.org/d3-geo-projection.v4.min.js"></script> -->
    <!-- <script src="https://d3js.org/d3-scale-chromatic.v3.min.js"></script> -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <style>
      #map {
        width: 800px;
        height: 600px;
      }
    </style>
  </head>
  <body>
    <div class="border border-info" id="map"></div>

    <script>
      const height = 600;
      const width = 800; 

      // Create a SVG element to hold the map
      const svg = d3
        .select("#map")
        .append("svg")
        .attr("width", width)
        .attr("height", height);

      // Load the GeoJSON file
      d3.json("/map").then(function (data) {
        console.log(data.features);

        // Create a projection based on the map's bounding box
        const projection = d3
          .geoMercator()
          .scale(1000)
          .center([0, 20])
          .translate([width / 2, height / 2]);
        // .fitSize([width, height], data);

        // Create a path generator
        const path = d3.geoPath().projection(projection);

        // Render the map
        svg
          .selectAll("path")
          .data(data.features)
          .enter()
          .append("path")
          .attr("d", path)
          .attr("fill", "lightblue")
          .attr("stroke", "white")
          .attr("stroke-width", 2);

        console.log("This is the end of the features script! Data should be available");
      });

      console.log("This is the end of the script");
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
    <!-- <script src="/static/script.js"></script> -->
  </body>
</html>
